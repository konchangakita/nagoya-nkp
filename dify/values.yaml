expose:
  ingressClassName: "" # required (e.g. dify-traefik)
  path: "/"            # fixed to root path (/)
  traefik:
    enabled: true      # Enable dedicated Traefik Ingress Controller
    # Traefik subchart values (passed to traefik subchart)
    service:
      type: LoadBalancer
    ingressClass:
      enabled: true
      name: dify-traefik
      isDefaultClass: false
    dashboard:
      enabled: false
    gateway:
      enabled: false   # Disable Gateway API (CRD conflict with existing)

external:
  scheme: ""           # required (e.g. https)
  host: ""             # required (LB IP or DNS)

images:
  web:
    repository: ""     # required (e.g. langgenius/dify-web)
    tag: ""            # required (e.g. 1.11.4)
  api:
    repository: ""     # required (e.g. langgenius/dify-api)
    tag: ""            # required (e.g. 1.11.4)
  worker:
  pluginDaemon:
    repository: ""     # required (e.g. langgenius/dify-plugin-daemon)
    tag: ""            # required (e.g. 1.11.4)
    repository: ""     # required (e.g. langgenius/dify-api)
    tag: ""            # required (e.g. 1.11.4)

secrets:
  # Note: Secret は自動生成されます（lookup で既存値を優先）
  # values.yaml には固定値を書かない（IP のように毎回変動するものではなく「同一で使い回してOK」なキー類は自動生成）
  openaiApiKey: ""     # optional (OpenAI API key)

dify:
  # Marketplace configuration
  marketplace:
    enabled: false     # Enable marketplace (set via --set dify.marketplace.enabled=true)
    apiUrl: ""         # Marketplace API URL (set via --set dify.marketplace.apiUrl=https://marketplace.dify.ai)

storage:
  storageClassName: "" # required (e.g. nutanix-volume)

postgresql:
  enabled: true
  image:
    tag: "16"          # bitnami/postgresql:16
  persistence:
    size: ""           # required (e.g. 20Gi)
  auth:
    username: ""       # required (e.g. dify)
    password: ""        # required - MUST BE FIXED (not randomly generated)
                       # PostgreSQL stores the password in PVC on first initialization.
                       # If you change this password, you must delete the PVC first:
                       #   kubectl delete pvc -n dify data-dify-postgresql-0
                       # Otherwise, authentication will fail because PostgreSQL will use the old password.
    database: ""       # required (e.g. dify)
  secret:
    name: "dify-postgresql"      # Secret name for PostgreSQL credentials
    usernameKey: "postgres-username"  # Key name for username in Secret
    passwordKey: "postgres-password" # Key name for password in Secret
    databaseKey: "postgres-database" # Key name for database name in Secret

redis:
  enabled: true
  image:
    tag: "7.2"         # bitnami/redis:7.2
  persistence:
    size: ""           # required (e.g. 8Gi)
  auth:
    password: ""       # optional

pluginDaemon:
  redis:
    host: "dify-redis-master"  # Redis Service name
    port: "6379"               # Redis port
    authEnabled: false         # Enable Redis authentication
    existingSecret: ""         # Secret name for Redis password (if authEnabled is true)
    passwordKey: "password"    # Key name for password in Secret (if authEnabled is true)

weaviate:
  enabled: true
  service:
    type: ClusterIP    # ClusterIP is sufficient (no external access needed)
  grpcService:
    type: ClusterIP    # gRPC service should also be ClusterIP (no external access needed)
  persistence:
    enabled: true
    size: ""           # required (e.g. 50Gi)
    storageClass: ""   # optional, defaults to storage.storageClassName if empty

dify:
  fileStorage:
    enabled: true
    size: ""           # required (e.g. 20Gi)
    storageClass: ""  # optional, defaults to nutanix-nfs if empty

